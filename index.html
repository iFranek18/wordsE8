<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>E8 CYBERQUEST: GOD MODE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --purple: #bc13fe; --gold: #ffd700; --red: #ff2e63; --bg: #030308; }
        body { margin:0; font-family: 'Rajdhani', sans-serif; background: var(--bg); color: #fff; overflow: hidden; height: 100vh; }
        .app { max-width: 500px; margin: 0 auto; height: 100vh; display: flex; flex-direction: column; position: relative; border: 1px solid #111; }
        .hidden { display: none !important; }

        /* HUD */
        .hud { padding: 10px 15px; background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--neon); display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; box-shadow: 0 0 20px rgba(0,242,255,0.2); }
        .p-stat { text-align: center; font-family: 'Orbitron'; font-size: 0.6rem; }
        .p-stat b { display: block; color: var(--neon); font-size: 1rem; text-shadow: 0 0 10px var(--neon); }
        .avatar-frame { width: 55px; height: 55px; border-radius: 50%; border: 3px solid var(--neon); display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; background: #000; transition: 0.3s; box-shadow: inset 0 0 10px var(--neon); }

        /* Scrollable Area */
        .main-container { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 90px; scroll-behavior: smooth; }

        /* Arena Cards */
        .arena-card { background: linear-gradient(135deg, #0a0a15, #151525); border: 1px solid #222; border-radius: 15px; padding: 20px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; position: relative; transition: 0.2s; }
        .arena-card.locked { opacity: 0.4; filter: grayscale(1); }
        .arena-card:not(.locked):hover { border-color: var(--neon); transform: scale(1.02); }
        .arena-title b { display: block; font-family: 'Orbitron'; color: var(--neon); font-size: 1.1rem; }
        .arena-badge { font-size: 0.6rem; background: var(--purple); padding: 2px 6px; border-radius: 4px; font-weight: 900; }

        /* Game UI */
        .game-header { display: flex; justify-content: space-between; padding: 10px; font-family: 'Orbitron'; font-size: 0.8rem; background: #000; }
        .game-core { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        #word-target { font-family: 'Orbitron'; font-size: 3rem; text-align: center; margin-bottom: 5px; text-shadow: 0 0 20px var(--neon); animation: glow 2s infinite; }
        @keyframes glow { 0%, 100% {opacity: 1} 50% {opacity: 0.7} }
        #correction-bar { height: 25px; color: var(--red); font-weight: 900; font-family: 'Orbitron'; text-align: center; margin-bottom: 15px; }
        .cyber-input { width: 90%; background: #000; border: 2px solid #333; border-radius: 15px; color: #fff; font-family: 'Orbitron'; font-size: 1.6rem; text-align: center; padding: 15px; box-shadow: inset 0 0 15px rgba(255,255,255,0.05); }

        /* Shop & Grid */
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .shop-item { background: #0a0a0a; border: 1px solid #222; border-radius: 12px; padding: 10px; text-align: center; transition: 0.2s; }
        .shop-item:hover { border-color: var(--gold); }
        .price-tag { background: var(--gold); color: #000; font-size: 0.7rem; font-weight: 900; padding: 2px 5px; border-radius: 4px; margin-top: 5px; display: inline-block; }

        /* Navbar */
        .navbar { position: absolute; bottom: 0; width: 100%; height: 75px; background: rgba(0,0,0,0.95); border-top: 1px solid #222; display: flex; justify-content: space-around; align-items: center; z-index: 50; }
        .nav-btn { font-size: 1.8rem; opacity: 0.3; transition: 0.3s; cursor: pointer; }
        .nav-btn.active { opacity: 1; color: var(--neon); transform: translateY(-5px); }

        /* Search Bar */
        .search-box { width: 100%; padding: 10px; background: #111; border: 1px solid #333; border-radius: 10px; color: #fff; margin-bottom: 15px; font-family: 'Rajdhani'; }

        /* Overlay */
        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.98); z-index: 100; display: flex; flex-direction: column; padding: 30px; }
        .cyber-btn { background: var(--neon); color: #000; border: none; padding: 15px; border-radius: 10px; font-family: 'Orbitron'; font-weight: 900; cursor: pointer; margin: 10px 0; font-size: 1rem; }
    </style>
</head>
<body>

<div class="app">
    <div class="hud">
        <div class="p-stat">üèÜ <b id="h-cups">0</b><small>Trophies</small></div>
        <div class="avatar-frame" id="h-av" onclick="tab('locker')">ü•∑</div>
        <div class="p-stat">üí∞ <b id="h-coins">0</b><small>CyberCoins</small></div>
    </div>

    <div id="scr-home" class="main-container">
        <h2 style="font-family:'Orbitron'; text-align:center; color:var(--gold); font-size:0.9rem; letter-spacing:3px">SELECT BATTLEGROUND</h2>
        <div id="arenas-list"></div>
        <div class="arena-card" style="border: 2px solid var(--purple)" onclick="showMulti()">
            <div class="arena-title"><b>MULTIPLAYER 1VS1</b><small>Kodowe wyzwanie ze znajomym</small></div>
            <div style="font-size:1.5rem">üåê</div>
        </div>
    </div>

    <div id="scr-game" class="app hidden">
        <div class="game-header">
            <span style="color:var(--neon)">ME: <b id="g-score">0</b></span>
            <span id="g-timer" style="color:var(--gold)">60s</span>
            <span id="g-opp-wrap" class="hidden" style="color:var(--red)">OPP: <b id="g-opp-score">0</b></span>
        </div>
        <div class="game-core">
            <div id="correction-bar"></div>
            <div id="word-target">READY?</div>
            <input type="text" id="g-input" class="cyber-input" placeholder="T≈ÅUMACZENIE..." autocomplete="off">
            <button class="cyber-btn" style="width:100%; margin-top:20px" onclick="submit()">CONFIRM</button>
        </div>
    </div>

    <div id="scr-shop" class="main-container hidden">
        <h2 style="font-family:'Orbitron'; text-align:center">TECH MARKET</h2>
        <div class="grid-3" id="shop-box"></div>
    </div>

    <div id="scr-locker" class="main-container hidden">
        <h2 style="font-family:'Orbitron'; text-align:center">MY GEAR</h2>
        <div class="grid-3" id="locker-box"></div>
    </div>

    <div id="scr-dict" class="main-container hidden">
        <input type="text" id="dict-search" class="search-box" placeholder="Szukaj s≈Ç√≥wka..." oninput="renderDict()">
        <div id="dict-results"></div>
    </div>

    <div id="scr-settings" class="main-container hidden">
        <h2 style="font-family:'Orbitron'">SYSTEM</h2>
        <button class="cyber-btn" style="background:var(--red); color:#fff; width:100%" onclick="resetGame()">FACTORY RESET</button>
    </div>

    <div id="overlay-multi" class="overlay hidden">
        <h1 style="font-family:'Orbitron'; text-align:center">1VS1 LINK</h1>
        <div id="multi-setup">
            <button class="cyber-btn" style="width:100%" onclick="hostMatch()">GENERATE ROOM CODE</button>
            <p style="text-align:center; color:#555">OR</p>
            <input type="text" id="join-code" class="cyber-input" style="width:100%; box-sizing:border-box" placeholder="CODE">
            <button class="cyber-btn" style="width:100%; background:var(--purple)" onclick="joinMatch()">JOIN SESSION</button>
        </div>
        <div id="multi-lobby" class="hidden" style="text-align:center">
            <p>SHARE THIS CODE:</p>
            <h1 id="room-code-display" style="color:var(--gold); font-size:4rem">----</h1>
            <p id="room-status">Waiting for Rival...</p>
            <button id="btn-start-multi" class="cyber-btn hidden" onclick="beginMulti()">START BATTLE</button>
        </div>
        <button onclick="hideMulti()" style="background:none; border:none; color:#444; margin-top:30px">CANCEL</button>
    </div>

    <div class="navbar">
        <div class="nav-btn active" id="n-home" onclick="tab('home')">üèüÔ∏è</div>
        <div class="nav-btn" id="n-shop" onclick="tab('shop')">üõí</div>
        <div class="nav-btn" id="n-dict" onclick="tab('dict')">üìö</div>
        <div class="nav-btn" id="n-settings" onclick="tab('settings')">‚öôÔ∏è</div>
    </div>
</div>

<script>
// ==========================================
// üìö PE≈ÅNA BAZA S≈Å√ìW (300+)
// ==========================================
const DB = {
    1: [
        {en:"I", pl:"ja"}, {en:"you", pl:"ty / wy"}, {en:"he", pl:"on"}, {en:"she", pl:"ona"}, {en:"it", pl:"ono"}, {en:"we", pl:"my"}, {en:"they", pl:"oni"}, {en:"me", pl:"mnie"}, {en:"him", pl:"jego"}, {en:"her", pl:"jej"}, {en:"us", pl:"nas"}, {en:"them", pl:"ich"}, {en:"my", pl:"m√≥j"}, {en:"your", pl:"tw√≥j"}, {en:"his", pl:"jego"}, {en:"its", pl:"jego"}, {en:"our", pl:"nasz"}, {en:"their", pl:"ich"}, {en:"what", pl:"co"}, {en:"who", pl:"kto"}, {en:"where", pl:"gdzie"}, {en:"when", pl:"kiedy"}, {en:"why", pl:"dlaczego"}, {en:"how", pl:"jak"}, {en:"in", pl:"w"}, {en:"on", pl:"na"}, {en:"at", pl:"o / przy"}, {en:"to", pl:"do"}, {en:"from", pl:"z"}, {en:"with", pl:"z"}, {en:"about", pl:"o"}, {en:"for", pl:"dla"}, {en:"and", pl:"i"}, {en:"but", pl:"ale"}, {en:"or", pl:"lub"}, {en:"because", pl:"poniewa≈º"}, {en:"so", pl:"wiƒôc"}, {en:"if", pl:"je≈õli"}, {en:"mother", pl:"mama"}, {en:"father", pl:"tata"}, {en:"sister", pl:"siostra"}, {en:"brother", pl:"brat"}, {en:"friend", pl:"przyjaciel"}, {en:"school", pl:"szko≈Ça"}, {en:"teacher", pl:"nauczyciel"}, {en:"book", pl:"ksiƒÖ≈ºka"}, {en:"pen", pl:"d≈Çugopis"}, {en:"desk", pl:"biurko"}, {en:"apple", pl:"jab≈Çko"}, {en:"water", pl:"woda"}, {en:"bread", pl:"chleb"}, {en:"cat", pl:"kot"}, {en:"dog", pl:"pies"}, {en:"house", pl:"dom"}, {en:"car", pl:"samoch√≥d"}, {en:"city", pl:"miasto"}, {en:"sun", pl:"s≈Ço≈Ñce"}, {en:"day", pl:"dzie≈Ñ"}, {en:"night", pl:"noc"}, {en:"happy", pl:"szczƒô≈õliwy"}, {en:"sad", pl:"smutny"}, {en:"big", pl:"du≈ºy"}, {en:"small", pl:"ma≈Çy"}, {en:"good", pl:"dobry"}, {en:"bad", pl:"z≈Çy"}
    ],
    2: [
        {en:"become", pl:"stawaƒá siƒô"}, {en:"seem", pl:"wydawaƒá siƒô"}, {en:"change", pl:"zmieniaƒá"}, {en:"start", pl:"zaczynaƒá"}, {en:"finish", pl:"ko≈Ñczyƒá"}, {en:"help", pl:"pomagaƒá"}, {en:"wait", pl:"czekaƒá"}, {en:"stay", pl:"zostawaƒá"}, {en:"leave", pl:"opuszczaƒá"}, {en:"find", pl:"znajdowaƒá"}, {en:"lose", pl:"traciƒá"}, {en:"win", pl:"wygrywaƒá"}, {en:"choose", pl:"wybieraƒá"}, {en:"try", pl:"pr√≥bowaƒá"}, {en:"need", pl:"potrzebowaƒá"}, {en:"want", pl:"chcieƒá"}, {en:"remember", pl:"pamiƒôtaƒá"}, {en:"forget", pl:"zapominaƒá"}, {en:"believe", pl:"wierzyƒá"}, {en:"travel", pl:"podr√≥≈ºowaƒá"}, {en:"arrive", pl:"przyje≈ºd≈ºaƒá"}, {en:"return", pl:"wracaƒá"}, {en:"buy", pl:"kupowaƒá"}, {en:"sell", pl:"sprzedawaƒá"}, {en:"pay", pl:"p≈Çaciƒá"}, {en:"cost", pl:"kosztowaƒá"}, {en:"spend", pl:"wydawaƒá"}, {en:"save", pl:"oszczƒôdzaƒá"}, {en:"share", pl:"dzieliƒá siƒô"}, {en:"meet", pl:"spotykaƒá"}, {en:"visit", pl:"odwiedzaƒá"}
    ],
    3: [
        {en:"decide", pl:"decydowaƒá"}, {en:"plan", pl:"planowaƒá"}, {en:"prepare", pl:"przygotowywaƒá"}, {en:"organize", pl:"organizowaƒá"}, {en:"manage", pl:"zarzƒÖdzaƒá"}, {en:"improve", pl:"poprawiaƒá"}, {en:"reduce", pl:"zmniejszaƒá"}, {en:"increase", pl:"zwiƒôkszaƒá"}, {en:"create", pl:"tworzyƒá"}, {en:"destroy", pl:"niszczyƒá"}, {en:"repair", pl:"naprawiaƒá"}, {en:"protect", pl:"chroniƒá"}, {en:"allow", pl:"pozwalaƒá"}, {en:"prevent", pl:"zapobiegaƒá"}, {en:"refuse", pl:"odmawiaƒá"}, {en:"accept", pl:"akceptowaƒá"}, {en:"explain", pl:"wyja≈õniaƒá"}, {en:"describe", pl:"opisywaƒá"}, {en:"complain", pl:"narzekaƒá"}, {en:"promise", pl:"obiecywaƒá"}, {en:"warn", pl:"ostrzegaƒá"}, {en:"suggest", pl:"sugerowaƒá"}, {en:"agree", pl:"zgadzaƒá siƒô"}, {en:"support", pl:"wspieraƒá"}, {en:"trust", pl:"ufaƒá"}, {en:"blame", pl:"obwiniaƒá"}, {en:"punish", pl:"karaƒá"}, {en:"reward", pl:"nagradzaƒá"}
    ],
    4: [
        {en:"appear", pl:"pojawiaƒá siƒô"}, {en:"disappear", pl:"znikaƒá"}, {en:"belong", pl:"nale≈ºeƒá"}, {en:"include", pl:"zawieraƒá"}, {en:"affect", pl:"wp≈Çywaƒá"}, {en:"depend", pl:"zale≈ºeƒá"}, {en:"realize", pl:"u≈õwiadamiaƒá sobie"}, {en:"expect", pl:"oczekiwaƒá"}, {en:"imagine", pl:"wyobra≈ºaƒá sobie"}, {en:"consider", pl:"rozwa≈ºaƒá"}, {en:"admit", pl:"przyznawaƒá siƒô"}, {en:"deny", pl:"zaprzeczaƒá"}, {en:"demand", pl:"≈ºƒÖdaƒá"}, {en:"encourage", pl:"zachƒôcaƒá"}, {en:"discover", pl:"odkrywaƒá"}, {en:"invent", pl:"wynajdywaƒá"}, {en:"explore", pl:"eksplorowaƒá"}, {en:"research", pl:"badaƒá"}, {en:"prove", pl:"udowadniaƒá"}, {en:"doubt", pl:"wƒÖtpiƒá"}, {en:"notice", pl:"zauwa≈ºaƒá"}, {en:"compare", pl:"por√≥wnywaƒá"}, {en:"connect", pl:"≈ÇƒÖczyƒá"}, {en:"separate", pl:"oddzielaƒá"}, {en:"collect", pl:"zbieraƒá"}, {en:"waste", pl:"marnowaƒá"}, {en:"earn", pl:"zarabiaƒá"}, {en:"borrow", pl:"po≈ºyczaƒá"}, {en:"lend", pl:"po≈ºyczaƒá komu≈õ"}
    ],
    5: [
        {en:"achieve", pl:"osiƒÖgaƒá"}, {en:"succeed", pl:"odnosiƒá sukces"}, {en:"fail", pl:"ponosiƒá pora≈ºkƒô"}, {en:"handle", pl:"radziƒá sobie"}, {en:"avoid", pl:"unikaƒá"}, {en:"influence", pl:"wp≈Çyw"}, {en:"responsibility", pl:"odpowiedzialno≈õƒá"}, {en:"freedom", pl:"wolno≈õƒá"}, {en:"justice", pl:"sprawiedliwo≈õƒá"}, {en:"society", pl:"spo≈Çecze≈Ñstwo"}, {en:"environment", pl:"≈õrodowisko"}, {en:"pollution", pl:"zanieczyszczenie"}, {en:"climate", pl:"klimat"}, {en:"resource", pl:"zas√≥b"}, {en:"technology", pl:"technologia"}, {en:"device", pl:"urzƒÖdzenie"}, {en:"system", pl:"system"}, {en:"impact", pl:"wp≈Çyw"}, {en:"result", pl:"rezultat"}, {en:"solution", pl:"rozwiƒÖzanie"}, {en:"priority", pl:"priorytet"}, {en:"quality", pl:"jako≈õƒá"}, {en:"value", pl:"warto≈õƒá"}, {en:"profit", pl:"zysk"}, {en:"habit", pl:"nawyk"}, {en:"culture", pl:"kultura"}, {en:"meaning", pl:"znaczenie"}, {en:"experience", pl:"do≈õwiadczenie"}, {en:"effort", pl:"wysi≈Çek"}, {en:"goal", pl:"cel"}, {en:"accident", pl:"wypadek"}
    ]
};

const ARENA_CONFIG = { 1:0, 2:1500, 3:4000, 4:8000, 5:15000 };

const SHOP_ITEMS = [
    {id:1, n:"Robot", i:"ü§ñ", p:300, t:"av"}, {id:2, n:"Alien", i:"üëΩ", p:600, t:"av"}, {id:3, n:"King", p:1500, i:"üëë", t:"av"},
    {id:4, n:"Ninja", i:"ü•∑", p:0, t:"av"}, {id:5, n:"Skull", i:"üíÄ", p:1000, t:"av"}, {id:6, n:"Dragon", i:"üê≤", p:5000, t:"av"},
    {id:10, n:"Neon", i:"üü¶", p:200, t:"cl", v:"#00f2ff"}, {id:11, n:"Gold", i:"üü®", p:2000, t:"cl", v:"#ffd700"}, {id:12, n:"Lava", i:"üüß", p:800, t:"cl", v:"#ff4500"},
    {id:23, n:"Rich", i:"üíé", p:10000, t:"av"}, {id:24, n:"Ghost", i:"üëª", p:450, t:"av"}
];

// --- STATE ---
let state = JSON.parse(localStorage.getItem('cyber_v4')) || {
    cups:0, coins:100, av:"ü•∑", col:"#00f2ff", inv:["ü•∑", "#00f2ff"]
};

let game = { arena:1, pool:[], idx:0, score:0, errs:0, timer:null, time:60 };

// --- CORE FUNCTIONS ---
function save() {
    localStorage.setItem('cyber_v4', JSON.stringify(state));
    document.getElementById('h-cups').innerText = state.cups;
    document.getElementById('h-coins').innerText = state.coins;
    document.getElementById('h-av').innerText = state.av;
    document.getElementById('h-av').style.borderColor = state.col;
    renderArenas();
}

function tab(name) {
    document.querySelectorAll('.app > div:not(.hud):not(.navbar)').forEach(d => d.classList.add('hidden'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('scr-'+name).classList.remove('hidden');
    if(document.getElementById('n-'+name)) document.getElementById('n-'+name).classList.add('active');
    if(name === 'shop') renderShop();
    if(name === 'locker') renderLocker();
    if(name === 'dict') renderDict();
}

// --- ENGINE: LEKCJA ---
function initGame(lvl, lock) {
    if(lock) { alert("ZdobƒÖd≈∫ wiƒôcej puchar√≥w!"); return; }
    
    game.arena = lvl;
    game.score = 0; game.errs = 0; game.idx = 0; game.time = 60;
    game.pool = [...DB[lvl]].sort(() => 0.5 - Math.random());
    
    document.getElementById('g-score').innerText = "0";
    document.getElementById('g-timer').innerText = "60s";
    document.getElementById('correction-bar').innerText = "";
    
    tab('game');
    
    if(game.timer) clearInterval(game.timer);
    game.timer = setInterval(() => {
        game.time--;
        document.getElementById('g-timer').innerText = game.time + "s";
        if(game.time <= 0) finishMatch();
    }, 1000);
    
    draw();
}

function draw() {
    if(game.idx >= game.pool.length) { finishMatch(); return; }
    document.getElementById('word-target').innerText = game.pool[game.idx].en;
    document.getElementById('g-input').value = "";
    document.getElementById('g-input').focus();
}

function handleInput() {
    const input = document.getElementById('g-input').value.toLowerCase().trim();
    const correct = game.pool[game.idx].pl.toLowerCase().split(' / ').map(t => t.trim());
    
    if(correct.includes(input)) {
        game.score++;
        document.getElementById('g-score').innerText = game.score;
        document.getElementById('correction-bar').innerText = "BARDZO DOBRZE!";
        document.getElementById('correction-bar').style.color = "var(--neon)";
        game.idx++;
        setTimeout(draw, 200);
    } else {
        game.errs++;
        const msg = game.pool[game.idx].pl.toUpperCase();
        document.getElementById('correction-bar').innerText = "B≈ÅƒÑD! POPRAWNIE: " + msg;
        document.getElementById('correction-bar').style.color = "var(--red)";
        
        // NEURAL: Dodaj na koniec kolejki
        game.pool.push(game.pool[game.idx]);
        game.idx++;
        setTimeout(draw, 1500);
    }
}

function finishMatch() {
    clearInterval(game.timer);
    let cups = game.score * 10;
    let coins = game.score * 5;
    state.cups += cups;
    state.coins += coins;
    alert(`FINISH!\nScore: ${game.score}\nRewards: +${cups} üèÜ | +${coins} üí∞`);
    save();
    tab('home');
}

// --- ARENAS ---
function renderArenas() {
    let h = "";
    for(let i=1; i<=5; i++) {
        let lock = state.cups < ARENA_CONFIG[i];
        h += `
            <div class="arena-card ${lock?'locked':''}" onclick="initGame(${i}, ${lock})">
                <div class="arena-title">
                    <b>ARENA ${i}</b>
                    <small>${lock ? 'LOCKED: '+(ARENA_CONFIG[i])+' üèÜ' : 'READY'}</small>
                </div>
                <div>${lock ? 'üîí' : '‚öîÔ∏è'}</div>
            </div>
        `;
    }
    document.getElementById('arenas-list').innerHTML = h;
}

// --- SHOP & LOCKER ---
function renderShop() {
    document.getElementById('shop-box').innerHTML = SHOP_ITEMS.map(i => {
        let has = state.inv.includes(i.v || i.i);
        return `
            <div class="shop-item">
                <span style="font-size:1.5rem; color:${i.v||'#fff'}">${i.i}</span><br>
                <small>${i.n}</small><br>
                ${has ? '‚úÖ' : `<div class="price-tag" onclick="buy(${i.id})">${i.p} üí∞</div>`}
            </div>
        `;
    }).join('');
}

function buy(id) {
    let itm = SHOP_ITEMS.find(x => x.id === id);
    if(state.coins >= itm.p) {
        state.coins -= itm.p;
        state.inv.push(itm.v || itm.i);
        save(); renderShop();
    } else alert("Brak CyberCoins!");
}

function renderLocker() {
    document.getElementById('locker-box').innerHTML = state.inv.map(v => `
        <div class="shop-item" onclick="equip('${v}')">
            <span style="font-size:2rem; color:${v.startsWith('#')?v:'#fff'}">${v.startsWith('#')?'‚óè':v}</span>
        </div>
    `).join('');
}

function equip(v) {
    if(v.startsWith('#')) state.col = v; else state.av = v;
    save(); alert("Equipped!");
}

// --- DICTIONARY ---
function renderDict() {
    let q = document.getElementById('dict-search').value.toLowerCase();
    let h = "";
    for(let a in DB) {
        let filtered = DB[a].filter(w => w.en.toLowerCase().includes(q) || w.pl.toLowerCase().includes(q));
        if(filtered.length > 0) {
            h += `<b style="color:var(--neon)">ARENA ${a}</b><br>`;
            filtered.forEach(w => h += `<div style="border-bottom:1px solid #111; padding:5px; font-size:0.8rem">${w.en} = ${w.pl}</div>`);
        }
    }
    document.getElementById('dict-results').innerHTML = h;
}

// --- MULTI ---
function showMulti() { document.getElementById('overlay-multi').classList.remove('hidden'); }
function hideMulti() { document.getElementById('overlay-multi').classList.add('hidden'); }
function hostMatch() {
    let c = Math.floor(1000+Math.random()*9000);
    document.getElementById('multi-setup').classList.add('hidden');
    document.getElementById('multi-lobby').classList.remove('hidden');
    document.getElementById('room-code-display').innerText = c;
    setTimeout(() => {
        document.getElementById('room-status').innerText = "RYWAL DO≈ÅƒÑCZY≈Å!";
        document.getElementById('btn-start-multi').classList.remove('hidden');
    }, 2500);
}
function joinMatch() { if(document.getElementById('join-code').value.length === 4) beginMulti(); }
function beginMulti() { hideMulti(); initGame(1, false); }

function resetGame() { if(confirm("Wszystkie postƒôpy zostanƒÖ usuniƒôte. Kontynuowaƒá?")) { localStorage.clear(); location.reload(); } }

// Enter Key
document.getElementById('g-input').addEventListener('keypress', e => { if(e.key === 'Enter') handleInput(); });

save();
</script>
</body>
</html>
